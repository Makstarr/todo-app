{"ast":null,"code":"var _jsxFileName = \"/Users/maks/Git/todo/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport AddList from './components/AddList';\nimport List from './components/List';\nimport Tasks from './components/Tasks';\nimport listSvg from \"./assets/img/list.svg\";\nimport doIt from './assets/img/do-it.png';\nimport './css/reset.css';\nimport './css/index.min.css';\nimport './css/List.min.css';\nimport './css/AddList.min.css';\nimport './css/Tasks.min.css';\nimport './css/AddTasks.min.css';\n\nfunction App() {\n  const colorsApi = 'https://tojustdoit-api.herokuapp.com/foo',\n        localCopycitiesApi = './cities.json',\n        proxy = 'https://cors-anywhere.herokuapp.com/',\n        apiKey = 'd61720d70f3bf3fa8ef106bcfae844c6',\n        calendar = 'http://min-prices.aviasales.ru/calendar_preload',\n        numberOfPasanger = 1;\n\n  const getData = (url, callback, reject = console.error) => {\n    var request = {};\n\n    if (!request[url]) {\n      request[url] = new XMLHttpRequest();\n    } //const request = new XMLHttpRequest();\n\n\n    request[url].open('GET', url);\n    request[url].addEventListener('readystatechange', () => {\n      if (request[url].readyState !== 4) return;\n\n      if (request[url].status === 200) {\n        callback(request[url].response);\n      } else {\n        alert.textContent = 'На выбранные даты вариантов нет';\n        reject(request[url].status);\n      }\n    });\n    request[url].send();\n  };\n\n  const [lists, setLists] = useState(null);\n  const [colors, setColors] = useState(null);\n  const [activeItem, setActiveItem] = useState({\n    allTasks: true\n  });\n  console.log(lists);\n  useEffect(() => {\n    getData(proxy + colorsApi, data => {\n      setColors(data);\n    });\n    getData(proxy + listsApi, data => {\n      setLists(data);\n    });\n  }, []);\n\n  const onAddList = obj => {\n    console.log(obj);\n    setLists([...lists, obj]);\n  };\n\n  const onAddTask = (obj, id) => {\n    setLists(lists.map(i => {\n      if (i.id === id) {\n        i.tasks = [...i.tasks, obj];\n      }\n\n      return i;\n    }));\n  };\n\n  const onCompleteTask = (taskId, listId) => {\n    setLists(lists.map(list => {\n      if (list.id === listId) {\n        list.tasks.map(task => {\n          if (task.id === taskId) {\n            task.completed = !task.completed;\n          }\n\n          return task;\n        });\n      }\n\n      return list;\n    }));\n  };\n\n  const onEditTitle = (id, newTitle) => {\n    const newLists = lists.map(i => {\n      if (i.id === id) {\n        i.name = newTitle;\n      }\n\n      return i;\n    });\n    setLists(newLists);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"todo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"todo__sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    items: [{\n      icon: /*#__PURE__*/React.createElement(\"img\", {\n        src: listSvg,\n        alt: \"list icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 19\n        }\n      }),\n      name: 'All tasks',\n      allTasks: true,\n      active: true\n    }],\n    activeItem: activeItem,\n    onClickItem: i => {\n      i.active = true;\n      setActiveItem(i);\n    },\n    isRemovable: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }), lists ? /*#__PURE__*/React.createElement(List, {\n    items: lists,\n    onRemove: id => setLists(lists.filter(item => item.id !== id)),\n    onClickItem: i => {\n      i.active = true;\n      setActiveItem(i);\n    },\n    activeItem: activeItem,\n    isRemovable: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 10 + 'px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, \"Loading...\"), /*#__PURE__*/React.createElement(AddList, {\n    onAdd: onAddList,\n    colors: colors,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 10\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"shai\",\n    src: doIt,\n    alt: \"list icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"todo__tasks\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }, lists ? /*#__PURE__*/React.createElement(Tasks, {\n    onEditTitle: onEditTitle,\n    lists: !activeItem.allTasks ? [activeItem] : lists,\n    onAddTask: onAddTask,\n    onCompleteTask: onCompleteTask,\n    onDeleteTask: (taskId, listId) => {\n      setLists(lists.map(list => {\n        if (list.id === listId) {\n          list.tasks = list.tasks.filter(item => item.id !== taskId);\n        }\n\n        return list;\n      }));\n    },\n    onUpdateTask: (taskId, listId, newText) => {\n      setLists(lists.map(list => {\n        if (list.id === listId) {\n          list.tasks.find(item => item.id === taskId).text = newText;\n        }\n\n        return list;\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 16\n    }\n  }) : \"\")));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/maks/Git/todo/src/App.js"],"names":["React","useState","useEffect","AddList","List","Tasks","doIt","App","colorsApi","localCopycitiesApi","proxy","apiKey","calendar","numberOfPasanger","getData","url","callback","reject","console","error","request","XMLHttpRequest","open","addEventListener","readyState","status","response","alert","textContent","send","lists","setLists","colors","setColors","activeItem","setActiveItem","allTasks","log","data","listsApi","onAddList","obj","onAddTask","id","map","i","tasks","onCompleteTask","taskId","listId","list","task","completed","onEditTitle","newTitle","newLists","name","icon","listSvg","active","filter","item","padding","newText","find","text"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'; \n\nimport AddList from './components/AddList'\nimport List from './components/List'\nimport Tasks from './components/Tasks'\n\nimport listSvg from  './assets/img/list.svg'\nimport doIt from  './assets/img/do-it.png'\nimport './css/reset.css';\nimport './css/index.min.css';\nimport './css/List.min.css';\nimport './css/AddList.min.css';\nimport './css/Tasks.min.css';\nimport './css/AddTasks.min.css';\n\n\nfunction App() {\n  const colorsApi = 'https://tojustdoit-api.herokuapp.com/foo',\n      localCopycitiesApi = './cities.json',\n      proxy = 'https://cors-anywhere.herokuapp.com/',\n      apiKey = 'd61720d70f3bf3fa8ef106bcfae844c6',\n      calendar = 'http://min-prices.aviasales.ru/calendar_preload',\n      numberOfPasanger = 1;\n      const getData = (url,callback,reject = console.error) => {\n        var request = {};\n        if(!request[url]) {\n            request[url] = new XMLHttpRequest();\n        }\n        //const request = new XMLHttpRequest();\n        request[url].open('GET', url);\n        request[url].addEventListener('readystatechange',\n        () => {\n            if (request[url].readyState !==4) return;\n            if (request[url].status ===200) {\n                callback(request[url].response);\n            }\n            else {\n                alert.textContent = 'На выбранные даты вариантов нет';\n                reject(request[url].status);\n            }\n        });\n        request[url].send();\n    };\n\n\n\n\n\n\n\n\n\n\n  const [lists, setLists] = useState(null)\n  const [colors, setColors] = useState(null)\n  const [activeItem, setActiveItem] = useState({ \n    allTasks: true\n   })\n   console.log(lists)\n    useEffect(() => {\n    getData(proxy + colorsApi, (data) => {\n      setColors(data)\n    });\n    getData(proxy + listsApi, (data) => {\n      setLists(data)\n    });\n  }, []);\n  \n  const onAddList = (obj) =>{\n    console.log(obj)\n\n    setLists([...lists, obj])\n  }\n\n  const onAddTask = ((obj, id) =>{\n    setLists(\n      lists.map((i) => {\n        if (i.id === id){\n          i.tasks = [...i.tasks, obj]\n        }\n        return i;\n      })\n    );\n  })\n\n  const onCompleteTask=(taskId, listId)=>{\n    setLists(lists.map(list=>\n      {\n        if (list.id === listId)\n        {\n          list.tasks.map(task =>\n            {\n              if (task.id===taskId){\n                task.completed=!task.completed;\n              }\n              return task\n            }\n          )\n        }\n      return list;\n    }))\n  }\n\n  const onEditTitle = (id, newTitle) => {\n    const newLists = lists.map((i) => {\n      if (i.id===id){\n        i.name = newTitle;\n      }\n      return i\n    });\n    setLists(newLists)\n  }\n\n  return (\n    <div className=\"app\">\n    <div className=\"todo\">\n      <section className=\"todo__sidebar\">\n        <List items= {[\n          { \n            icon: <img src={listSvg} alt=\"list icon\"/>,\n            name:'All tasks',\n            allTasks: true,\n            active:true\n           }\n        ]}\n        activeItem={activeItem}\n        onClickItem={(i) => {\n          i.active=true\n          setActiveItem(i)}}\n        isRemovable={false}/>\n        {lists?(\n        <List items= {lists} \n        onRemove = {(id)=>\n          setLists(lists.filter(item => item.id !== id))}\n        onClickItem={(i) => {\n          i.active=true\n          setActiveItem(i)}}\n        activeItem={activeItem}\n        isRemovable/>\n        ) : <div style={{padding: 10 + 'px'}}>Loading...</div>}\n         <AddList onAdd={onAddList} colors={colors}/>\n         <img className =\"shai\"src={doIt} alt=\"list icon\"/>\n      </section>\n      <section className=\"todo__tasks\">\n        {lists?<Tasks \n        onEditTitle={onEditTitle} \n        lists={!activeItem.allTasks?[activeItem]:lists}\n        onAddTask={onAddTask}\n        onCompleteTask={onCompleteTask}\n        onDeleteTask={(taskId, listId) =>{\n            setLists(lists.map(list=>{\n              if(list.id === listId){\n                list.tasks = list.tasks.filter(item => item.id !== taskId)\n              }\n                return list;\n              })\n            );\n          }\n        }\n        onUpdateTask={(taskId, listId, newText)=>{\n          setLists(lists.map(list=>{\n            if(list.id === listId){\n              list.tasks.find(item => item.id === taskId).text = newText\n            }\n              return list;\n            })\n          );\n        }\n\n        }\n        />:\"\"}\n      </section>\n    </div>\n    </div>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}